
DECLARE @RC int
-- ENTRADA
DECLARE @IP_CAA_CEN_ACCOUNT varchar(4)
DECLARE @IP_CAA_CHANN varchar(2)
DECLARE @IP_WSS_RET_CTA char(5)
DECLARE @IP_WSS_CUENTA char(5)
DECLARE @IP_WSS_CUENTA_710 char(5)
DECLARE @IP_PRKEY char (2)
DECLARE @IP_OPCION char(1)
DECLARE @IP_ENT_IN char(4)
DECLARE @IP_BDMID_IN char(40)
DECLARE @IP_NUMCUEN char (14)
--DECLARE @IP_BRN_OPEN char(4)
--DECLARE @IP_COD_PROD char(2)
--DECLARE @IP_NUM_ACC char(8)
--DECLARE @IP_FECHA char(10)
DECLARE @IP_ULLAVE char(20)

-- SALIDA
DECLARE @REG1 char(4000)
DECLARE @REG2 char(4000)
DECLARE @REG3 char(4000)
DECLARE @REG4 char(4000)
DECLARE @REG5 char(4000)
DECLARE @REG6 char(4000)
DECLARE @REG7 char(4000)
DECLARE @REG8 char(4000)
DECLARE @REG9 char(4000)
DECLARE @REG10 char(4000)
DECLARE @REG11 char(4000)
DECLARE @REG12 char(4000)
DECLARE @REG13 char(4000)
DECLARE @REG14 char(4000)
DECLARE @REG15 char(4000)
DECLARE @BAN71 char(3)
--DECLARE @IP_FECHA_ACCT char(10)
DECLARE @MOV71 varchar(max)
DECLARE @MOV710 varchar(max)
DECLARE @403_Json varchar(max)
DECLARE @datosCuenta varchar(max)


-- TODO: Set parameter values here.
SET @IP_CAA_CEN_ACCOUNT = 9546
SET @IP_CAA_CHANN = 06
SET @IP_WSS_RET_CTA = 'TRUE'
SET @IP_WSS_CUENTA ='TRUE'
SET @IP_WSS_CUENTA_710 ='TRUE'
SET @IP_OPCION =null
SET @IP_ENT_IN =0127
SET @IP_BDMID_IN = '693d4754f284494c89b23b0276559834'
SET @IP_NUMCUEN = '06730100291521'

--SET @IP_BRN_OPEN = 0673
--SET @IP_COD_PROD = 0673
--SET @IP_NUM_ACC = 0291521
--SET @IP_FECHA = GETDATE()
SET @IP_ULLAVE = '9999-12-31 999999999'


EXEC SP_MB09Prueba01
   @IP_CAA_CEN_ACCOUNT
  ,@IP_CAA_CHANN
  ,@IP_WSS_RET_CTA
  ,@IP_WSS_CUENTA
  ,@IP_WSS_CUENTA_710
  ,@IP_OPCION
  ,@IP_ENT_IN
  ,@IP_BDMID_IN
  ,@IP_NUMCUEN
  ,@IP_ULLAVE
  ,@REG1
  ,@REG2
  ,@REG3
  ,@REG4
  ,@REG5
  ,@REG6
  ,@REG7
  ,@REG8
  ,@REG9
  ,@REG10
  ,@REG11
  ,@REG12
  ,@REG13
  ,@REG14
  ,@REG15
  ,@BAN71
  ,@MOV71
  ,@MOV710
  ,@403_Json
  ,@datosCuenta






--- VARIABLES DE ENTRADA PARA DIFERENTES PROCEDIMIENTOS 
-- @CAA_CEN_ACCOUNT --  9546
-- @CAA_CHANN -- 06
-- @IP_WSS_RET_CTA -- FALSE
-- @IP_WSS_CUENTA -- TRUE
-- @IP_WSS_CUENTA_710 -- TRUE

--- VARIABLES ENTRADA SP's
-- IP_OPCION -- Null
-- ENT_IN  -- 0127
-- BDMID_IN -- 693d4754f284494c89b23b0276559834
-- BRN_OPEN -- 0673
-- COD_PROD -- 30
-- NUM_ACC -- 0291521
-- FECHA -- @fecha_tsm
-- ULLAVE --'9999-12-31 999999999'
--------------------
DECLARE @fecha_tsm Date;
DECLARE @REG1 char(4000);    
DECLARE @REG2 char(4000);    
DECLARE @REG3 char(4000);    
DECLARE @REG4 char(4000);    
DECLARE @REG5 char(4000);    
DECLARE @REG6 char(4000);    
DECLARE @REG7 char(4000);    
DECLARE @REG8 char(4000);    
DECLARE @REG9 char(4000);    
DECLARE @REG10 char(4000);    
DECLARE @REG11 char(4000);    
DECLARE @REG12 char(4000);    
DECLARE @REG13 char(4000);    
DECLARE @REG14 char(4000);    
DECLARE @REG15 char(4000);

DECLARE @BAN71 CHAR(03); 
DECLARE @FECHA_ACCT char(10);
DECLARE @MOV71 VARCHAR(MAX) ='{}';
DECLARE @MOV710 VARCHAR(MAX)='{}'; 
DECLARE @403_Json VARCHAR(MAX)=' '; 
DECLARE @datosCuenta VARCHAR(MAX)=' ';

SET @fecha_tsm = GETDATE()
PRINT @fecha_tsm
EXEC SP_MB09Prueba01 '9546', '06', 'FALSE', 'TRUE', 'TRUE', NULL, '0127', '693d4754f284494c89b23b0276559834', '0673', '30', '0291521', @fecha_tsm, '9999-12-31 999999999', @REG1, @REG2, @REG3, @REG4, @REG5, @REG6, @REG7, @REG8, @REG9, @REG10, @REG11, @REG12, @REG13, @REG14, @REG15, @BAN71, @FECHA_ACCT, @MOV71, @MOV710, @403_Json, @datosCuenta


SELECT T140_DES_TABLE FROM MBDT140
-----
/*
 DECLARE @T140_DES_TABLE CHAR (250) = 'Compra Con Tarjeta Dig|419822G7|516576QE|516576QF|419822G8|419822OD|516576OE&'
 DECLARE @VN_MARCA_AUX VARCHAR (30) = NULL
 DECLARE @NUM INTEGER = NULL 

SET @VN_MARCA_AUX = SUBSTRING(@T140_DES_TABLE,1,CHARINDEX('|', @T140_DES_TABLE)-1)

SET @NUM = CHARINDEX('|', @T140_DES_TABLE)-1 
PRINT CONCAT (' CHARINDEX 1--> ', @NUM)
PRINT CONCAT (' CHARINDEX 2--> ', LEN(@T140_DES_TABLE)-CHARINDEX('|', @T140_DES_TABLE))
PRINT 'T140_DES_TABLE --> ' + @T140_DES_TABLE  
PRINT 'VN_MARCA_AUX --> ' + @VN_MARCA_AUX   */